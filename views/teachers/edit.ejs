<%- include('../partials/header') %>

<div class="container mt-4">
  <h2>Edit Teacher</h2>
  <form action="/teachers/edit/<%= teacher.id %>" method="POST">

    <!-- Username / Email -->
    <div class="form-group">
      <label for="username">Username (Email)</label>
      <input 
        type="text" 
        name="username" 
        id="username"
        class="form-control" 
        value="<%= teacher.username %>" 
        required
      >
    </div>

    <!-- Password (optional) -->
    <div class="form-group mt-3">
      <label for="password">New Password <small>(leave blank to keep current)</small></label>
      <input 
        type="password" 
        name="password" 
        id="password"
        class="form-control"
        placeholder="Leave blank to keep current password"
      >
    </div>

    <!-- Assigned Class Dropdown -->
    <div class="form-group mt-3">
      <label for="assigned_class">Assigned Class</label>
      <select name="assigned_class" id="assigned_class" class="form-control">
        <% classOptions.forEach((cls) => { %>
          <option value="<%= cls %>" <%= teacher.assigned_class === cls ? 'selected' : '' %>><%= cls %></option>
        <% }) %>
      </select>
    </div>

    <!-- Role Selector -->
    <div class="form-group mt-3">
      <label for="role">Role</label>
      <select name="role" id="role" class="form-control">
        <option value="teacher" <%= teacher.role === 'teacher' ? 'selected' : '' %>>Teacher</option>
        <option value="admin" <%= teacher.role === 'admin' ? 'selected' : '' %>>Admin</option>
      </select>
    </div>

    <!-- Submit Buttons -->
    <button type="submit" class="btn btn-primary mt-4">Save Changes</button>
    <a href="/teachers" class="btn btn-secondary mt-4 ms-2">Cancel</a>
  </form>
</div>

<%- include('../partials/footer') %>
